import { registerAttributeTypeTransform } from './registerAttributeTypeTransform'
// import * as helpers from '../../shared/helpers';

// jest.mock('../../shared/helpers');

describe('registerAttributeTypeTransform', () => {
  it('should return the transformer config', () => {
    const config = registerAttributeTypeTransform()
    const expectedConfig = {
      name: 'attribute/type',
      transformer: expect.any(Function),
      type: 'attribute'
    }

    expect(config).toMatchObject(expectedConfig)
  })

  describe('transformer', () => {
    it('should add the customOptions object when the prop is fontWeight', () => {
      const config = registerAttributeTypeTransform()
      const prop = {
        attributes: { category: 'typography' },
        name: 'typographyFontWeightSmall',
        original: {
          value: 500
        },
        path: [
          'typography',
          'fontWeight',
          'small'
        ],
        value: '.medium'
      }

      // jest
      //   .spyOn(helpers, 'isProp')
      //   .mockImplementation(() => () => true);

      // jest
      //   .spyOn(helpers, 'flipIsProp')
      //   .mockImplementation(() => () => false);

      const result = config.transformer(prop)
      const expectedResult = {
        customOptions: {
          includeType: true,
          type: 'UIFont.Weight'
        }
      }

      expect(result).toEqual(expectedResult)
    })

    it('should add the customOptions object', () => {
      // jest
      //   .spyOn(helpers, 'isProp')
      //   .mockImplementation(() => () => true);

      //   jest
      //   .spyOn(helpers, 'flipIsProp')
      //   .mockImplementation(() => () => false);

      const config = registerAttributeTypeTransform()
      const prop = {
        attributes: { category: 'spacing' },
        name: 'spacingSmall',
        original: {
          value: 8
        },
        path: [
          'spacing',
          'small'
        ],
        value: 8
      }

      const result = config.transformer(prop)
      const expectedResult = {
        customOptions: {
          includeType: true,
          type: 'CGFloat'
        }
      }

      expect(result).toEqual(expectedResult)
    })
  })
})
